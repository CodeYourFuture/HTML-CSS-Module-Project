window.FO||(window.FO={}),window.FO.NWPLegacy=function(){var a=this,b=a;a.utils=new function(){var a=this;String.prototype.formatAsPrice=function(a){var b=a?a:"";return b+this.replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})},a.stringify=function(a,b,c){function d(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var c,f,g,h,j,i=gap,k=b[a];switch(k&&"object"==typeof k&&"function"==typeof k.toJSON&&(k=k.toJSON(a)),"function"==typeof rep&&(k=rep.call(b,a,k)),typeof k){case"string":return d(k);case"number":return isFinite(k)?String(k):"null";case"boolean":case"null":return String(k);case"object":if(!k)return"null";if(gap+=indent,j=[],"[object Array]"===Object.prototype.toString.apply(k)){for(h=k.length,c=0;h>c;c+=1)j[c]=e(c,k)||"null";return g=0===j.length?"[]":gap?"[\n"+gap+j.join(",\n"+gap)+"\n"+i+"]":"["+j.join(",")+"]",gap=i,g}if(rep&&"object"==typeof rep)for(h=rep.length,c=0;h>c;c+=1)"string"==typeof rep[c]&&(f=rep[c],g=e(f,k),g&&j.push(d(f)+(gap?": ":":")+g));else for(f in k)Object.prototype.hasOwnProperty.call(k,f)&&(g=e(f,k),g&&j.push(d(f)+(gap?": ":":")+g));return g=0===j.length?"{}":gap?"{\n"+gap+j.join(",\n"+gap)+"\n"+i+"}":"{"+j.join(",")+"}",gap=i,g}}escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var f;if(gap="",indent="","number"==typeof c)for(f=0;c>f;f+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return e("",{"":a})},a.addMessageEventListener=function(b){a.addListener(window,"message",b)},a.sendMessageToIFrame=function(a,b,c){var d=document.getElementById(a);d.contentWindow.postMessage(b,c)},a.isElementExists=function(a){var b=document.querySelector(a);return null!=b},a.isChild=function(a,b){for(;null!=a;){if(a==b)return!0;a=a.parentNode}return!1},a.formatPrice=function(a){return a.replace(/./g,function(a,b,c){return!b||"."===a||(c.length-b)%3?a:","+a})},a.hash=function(a){var b=0;if(0==a.length)return b;for(i=0;i<a.length;i++){var c=a.charCodeAt(i);b=(b<<5)-b+c,b&=b}return b},a.createCorRequest=function(a,b){var c=null,d=function(){b&&b(c.status)};return window.XDomainRequest?(c=new XDomainRequest,c.onload=function(){a&&a(c.responseText)},c.onerror=d,c.ontimeout=d,c.onprogress=function(){}):(c=new XMLHttpRequest,c.onreadystatechange=function(){4==c.readyState&&(200==c.status?a&&a(c.responseText):b&&b(c.status))},c.ontimeout=d),c},a.removeDuplicateWords=function(a,b){var c=[];if(a.length>0)for(var d=a.match(/\S+/g),e={},f=0;f<d.length;f++)void 0==e[d[f]]&&(e[d[f]]=f,(!b||b(d[f]))&&(c[c.length]=d[f]));return c},a.addListener=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c)},a.removeListener=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent(b,c)},a.Base64=new function(){var a=this;a._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",a.encode=function(b){var d,e,f,g,h,i,j,c="",k=0;for(b=a._utf8_encode(b);k<b.length;)d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=b.charCodeAt(k++),g=d>>2,h=(3&d)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),c=c+a._keyStr.charAt(g)+a._keyStr.charAt(h)+a._keyStr.charAt(i)+a._keyStr.charAt(j);return c},a.decode=function(b){var d,e,f,g,h,i,j,c="",k=0;for(b=b.replace(/[^A-Za-z0-9\-\_\=]/g,"");k<b.length;)g=a._keyStr.indexOf(b.charAt(k++)),h=a._keyStr.indexOf(b.charAt(k++)),i=a._keyStr.indexOf(b.charAt(k++)),j=a._keyStr.indexOf(b.charAt(k++)),d=g<<2|h>>4,e=(15&h)<<4|i>>2,f=(3&i)<<6|j,c+=String.fromCharCode(d),64!=i&&(c+=String.fromCharCode(e)),64!=j&&(c+=String.fromCharCode(f));return c=a._utf8_decode(c)},a._utf8_encode=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},a._utf8_decode=function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},a.getAllTextFromElementsTree=function(b){var c="";if(b&&b.style&&a.isVisible(b)&&!a.isInvisibleDueToParentOverflow(b))for(var d=b.childNodes,e=0;e<d.length;e++)c+=3==d[e].nodeType?" "+d[e].nodeValue:a.getAllTextFromElementsTree(d[e]);return c},a.isVisible=function(a){if("none"==a.style.display||"hidden"==a.style.visibility)return!1;var c=b.utils.getElementPosWithOffsets(a);return c.left<0||c.top<10?!1:!0},a.isInvisibleDueToParentOverflow=function(a){return isInvisibleParent=function(a,b){if(b&&b!=document.body){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e=(c.left+c.right)/2,f=(c.top+c.bottom)/2;if(!(e>d.left&&e<d.right&&f>d.top&&f<d.bottom)){var g=window.getComputedStyle(b);if("hidden"==g.overflow)return!0}return isInvisibleParent(a,b.parentNode)}},a?isInvisibleParent(a,a.parentNode):void 0},a.clearString=function(b){return b=b.replace(/(<([^>]+)>)/gi,""),b=b.replace(/\$\d(?:\d|,|&|\.)*/g," "),b=b.replace(/\(.*\)/g," "),b=b.replace(/[\|\.,-\/#!$%\^&\*;:{}=\-_`~()@\+\?><\[\]\+]/g," "),b=b.replace(/\s{2,}/g," "),b=b.replace(/('|\s$)/g,""),/[\u00C0-\u017F]/.test(b)&&(b=a.removeDiacritics(b)),b},a.removeDiacritics=function(a){for(var b=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],c=0;c<b.length;c++)a=a.replace(b[c].letters,b[c].base);return a},a.getElementPosWithOffsets=function(a){if(a&&a.getBoundingClientRect){var b={top:0,left:0,width:0,height:0},c=a&&a.ownerDocument;if(b=a.getBoundingClientRect(),!c)return b;var d=c.defaultView||c.parentWindow,e=c.documentElement,f=b.top+(d.pageYOffset||e.scrollTop||0)-(e.clientTop||0),g=b.left+(d.pageXOffset||e.scrollLeft||0)-(e.clientLeft||0),h=parseInt(a.offsetWidth)||0,i=parseInt(a.offsetHeight)||0,j=f+i,k=g+h;return{top:f,left:g,width:h,height:i,bottom:j,right:k}}},a.addCssLink=function(a){var b=document.createElement("link");b.href=a,b.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(b)},a.loadCss=function(a){var b=document.createElement("style");b.styleSheet?b.styleSheet.cssText=a:"textContent"in b?b.textContent=a:"innerText"in b&&(b.setAttribute("type","text/css"),b.styleSheet.cssText=a),document.getElementsByTagName("head")[0].appendChild(b)},a.hasClass=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},a.addClass=function(b,c){a.hasClass(b,c)||(b.className+=" "+c)},a.removeClass=function(b,c){var d=" "+b.className.replace(/[\t\r\n]/g," ")+" ";if(a.hasClass(b,c)){for(;d.indexOf(" "+c+" ")>=0;)d=d.replace(" "+c+" "," ");b.className=d.replace(/^\s+|\s+$/g,"")}},a.toggleClass=function(b,c){var d=" "+b.className.replace(/[\t\r\n]/g," ")+" ";if(a.hasClass(b,c)){for(;d.indexOf(" "+c+" ")>=0;)d=d.replace(" "+c+" "," ");return b.className=d.replace(/^\s+|\s+$/g,""),!1}return b.className+=" "+c,!0},a.getFirstText=function(b,c){for(var d=0;d<b.length;d++){var e=b[d],f=document.querySelector(e),g=a.getAllTextFromElementsTree(f);if(g)return g}return c},a.getRequestParam=function(b,c){var d="";if(b instanceof Array)for(var e=0;e<b.length;e++){var f=a.getRequestParam(b[e]);d+=f?f+" ":""}else{var g=new RegExp(b+"=([^&]+)");d=location.href.match(g),d=d?d.pop():null}if(c&&d){var h=new RegExp("\\+","g");d=d.replace(h," ")}return d},a.populateTemplate=function(a,b){for(var c in b)null==b[c]&&(b[c]=""),a=a.replace(new RegExp("\\${"+c+"}","g"),b[c]);return a},a.fullTrim=function(b){return b=b||"",a.trim(b.replace(/[\t\r\n]/g," "))},a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},a.stringPriceAsFloat=function(a){return parseFloat(a.replace(/,/g,"").replace(/[^\d\.]/g,""))},a.isElementOutOfScreen=function(a){var b=[];return a.offsetLeft<0&&b.push("left"),a.offsetTop<0&&b.push("top"),a.offsetLeft+a.offsetWidth>document.body.offsetWidth&&b.push("right"),a.offsetTop+a.offsetHeight>document.body.offsetHeight&&b.push("bottom"),b},a.isOverlapped=function(b){if("undefined"!=typeof b&&"undefined"!=typeof document.elementFromPoint)for(var c=a.getElementPosWithOffsets(b),d=[{top:c.top,left:c.left+c.width-1},{top:c.top+c.height-1,left:c.left+c.width-1},{top:c.top,left:c.left},{top:c.top+c.height-1,left:c.left}],e={top:(window.pageYOffset||document.documentElement.scrollTop||0)-(document.clientTop||0),left:(window.pageXOffset||document.documentElement.scrollLeft||0)-(document.clientLeft||0)},f=0;f<d.length;f++){var g=d[f].top-e.top,h=d[f].left-e.left,i=document.elementFromPoint(h,g),j=window.getComputedStyle(i).paddingTop.replace(/^\D+/g,"");if(null!=i&&!a.isChild(b,i)&&j<b.clientHeight)return!0}},a.getTextIfClose=function(a,c,d,e){var f,g=document.querySelectorAll(c+":not(.foribbon)");if(0==g.length||g.length>5)return"";for(var h=d||100,i=e||100,j=[],k=0;k<g.length;k++){f=b.utils.getElementPosWithOffsets(g[k]),f.x=f.left,f.y=f.top,f.w=f.width,f.h=f.height;var l,m;f.y<a.y?(m=a.y-f.y-f.h,0>m&&(m=0)):f.y>a.y2?m=f.y-a.y2:f.y+f.h>=a.y&&f.y+f.h<a.y2&&(m=0),f.x<=a.x&&f.x+f.w>=a.x?l=0:f.x>a.x2&&(l=f.x-a.x2),h>l&&i>m&&(g[k].dis=l+m,j.push(g[k]))}return 0==j.length?"":1==j.length?j[0].innerText:(j.sort(function(a,b){return a.dis<b.dis?-1:a.dis>b.dis?1:0}),j[0].innerText)},a.getImgText=function(c){var d=200,e=200,f="";c=c||a.drawnOn;var g;if(c){for(var h=5,i=c,j=h;j>0&&i;j--){if("a"==i.tagName.toLowerCase()){g=i;break}i=i.parentNode}g&&(f+=g.title?g.title:"")}if(f=f.trim(),g){var k=g?g.href:"";if(k&&-1==k.indexOf("javascript")){var l="(http(s)?)?(://)?("+document.domain+")?((www.)("+document.domain+"))?",m=new RegExp(l,"i");if(k=k.replace(m,""),k&&k.length>0)for(var n=document.querySelectorAll("a[href*='"+k+"']"),o=0;o<n.length;o++){var p=n[o].title;f+=p?" "+p:b.utils.getAllTextFromElementsTree(n[o])}}}if(f=f.trim(),f=f.replace(/flash player/i,""),f.length<15){var q=b.utils.getElementPosWithOffsets(c);if(q.width>=d&&q.height>=e){q.x=q.left,q.y=q.top,q.x2=q.left+q.width,q.y2=q.top+q.height;var r=a.getTextIfClose(q,"h1",200,200,function(a){return"foribbon"!=a.className});r||(r=a.getTextIfClose(q,"h2",100,100)),r||(r=a.getTextIfClose(q,"h3",100,100)),r&&(f+=" "+r)}}f=f.trim(),c.title?f+=" "+c.title:c.alt&&(f+=" "+c.alt);var s=c.getAttribute("tooltiptext");return s&&(f+=" "+s),f},a.init=new function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},a.fillContext=function(){b.context={fosubid:sessionStorage.fosubid,fopartid:sessionStorage.fopartid,fobn:sessionStorage.fobn,fobl:sessionStorage.fobl,foc:sessionStorage.foc}},a.mergeObj=function(b,c){for(var d in c)try{c[d].constructor==Object?b[d]=a.mergeObj(b[d],c[d]):b[d]=c[d]}catch(e){b[d]=c[d]}return b},a.getTopDomain=function(){if(__tash||(__tash={}),!__tash.topDomain){var a,b,c="weird_get_top_level_domain=cookie",d=document.location.hostname.split(".");for(a=d.length-1;a>=0;a--)if(b=d.slice(a).join("."),document.cookie=c+";domain=."+b+";",document.cookie.indexOf(c)>-1){document.cookie=c.split("=")[0]+"=;domain=."+b+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",__tash.topDomain=b;break}}return __tash.topDomain},a.addAppNexusScripts=function(){var a=document.createElement("img");a.src="https://secure.adnxs.com/seg?add=1986008&t=2",a.width="1",a.height="1",document.getElementsByTagName("head")[0].appendChild(a)},a.addAppNexusRetargetTag=function(){var a=document.createElement("img");a.src="https://secure.adnxs.com/seg?add=2062814&t=2",a.width="1",a.height="1",document.getElementsByTagName("head")[0].appendChild(a)},a.addAppNexusCookie=function(a){var b=document.createElement("img");b.src=a,b.width="1",b.height="1",document.getElementsByTagName("head")[0].appendChild(b)}},a.PriceUtils=new function(){var a=this;a.factorPrice=150,a.currencyRegEx="[\\$\xa3\\u20AC\\u0440\\u0192\\u00A5\\u20B1]|usd|eur|ils|rs|desde|ab|rp|gbp|\u0440\u0443\u0431",a.priceRegex=/(([\$\xa3\u20AC\u0440\u0192\u00A5\u20B1]|usd|eur|ils|rp|rs|\u0440\u0443\u0431|z\u0142)\.?\s*(<[^>]+>|&nbsp;|\s)?([0-9]+[\,\.])?[0-9]+([\,\.][0-9]+)?)|(([0-9]+[\,\.])?[0-9]+([\,\.][0-9]+)?)(<[^>]+>|&nbsp;|\s|\s\,\-\s)?(\u20AC|\u0192|\u00A5|\u20B1|\u0440|usd|eur|ils|rp|rs|\u0440\u0443\u0431|z\u0142)\.?/gi,a.priceFont=0,a.closestPrice=1e3,a.elmFound=0,a.getPrice=function(b){try{if(b)for(var c,e,d=0,f=new RegExp("((from:?(&nbsp;|\\s))?<[^\\/>]+>\\s*(\xe0 partir de|from|now|sale|us|au|r)?\\s*("+a.currencyRegEx+")?\\s*(<[^>]+>|&nbsp;|\\s)?("+a.currencyRegEx+")\\.?\\s*(<[^>]+>|&nbsp;|\\s)?\\s*([0-9]+[\\,\\.])?[0-9]+([\\,\\.][0-9]+)?\\s*("+a.currencyRegEx+")?(<[^>]+>[^<]+<\\/[^>]+>)?)(&nbsp;|\\s)?(\\([0-9]+%\\))?|((from:?(&nbsp;|\\s))?<[^\\/>]+>\\s*(\xe0 partir de|from|now|sale|us|au|r|rp|gbp|\u0440\u0443\u0431)?\\s*?(([0-9]+[\\,\\.])?[0-9]+([\\,\\.][0-9]+)?)(<[^>]+>|&nbsp;|\\s|\\s\\,\\-\\s)?("+a.currencyRegEx+")\\.?(&nbsp;|\\s)?(\\([0-9]+%\\))?)","gi"),g=b.parentNode;g&&"BODY"!=g.nodeName;g=g.parentNode)if(d++,c=g.innerHTML,c&&(c=c.replace(/[\n\t]/gi,""),c=c.replace(/\s+/g," "),e=c.match(f),e&&e.length))return this.findCorrectPrice(g,b,e);return 0}catch(h){return 0}},a.findCorrectPrice=function(a,b,c){for(var d=[],e=[],f=[],g=[],h=!1,j=this,k=/(id\s?=\s?")(.*?)(?=\")/gi,l=/(class\s?=\s?")(.*?)(?=\")/gi,m=/(<)([^>^/^\s]+)/gi,n=0;n<c.length;n++)c[n].replace(k,function(a){""!=a&&(a=j.trimPrices(a),e[a]?e[a]++:e[a]=1,h=!0)}),h?h=!1:(c[n].replace(l,function(a){""!=a&&(a=j.trimPrices(a),d[a]?d[a]++:d[a]=1,h=!0)}),h?h=!1:c[n].replace(m,function(a){""!=a&&(a=j.trimPrices(a),f[a]?f[a]++:f[a]=1)}));if(this.imgData=this.nodePos(b),g=g.concat(this.getUniqueNodes(a,e,1,1)),g=g.concat(this.getUniqueNodes(a,d,5,2)),0==g.length)return c.length<6&&0==this.elmFound?1==c.length?this.extractPrice(c[0]):this.careArr(c):0;g.sort(function(a,b){return a.dis<b.dis?-1:a.dis>b.dis?1:0});var o=this.decideRealPrice(g);return o},a.decideRealPrice=function(a){for(var b=a.length,c=0;b>c;c++){var d=a[c];if(d.fsize==this.priceFont&&"line-through"!=d.fdeco)return this.getPriceFromObj(d)}return 0},a.getUniqueNodes=function(a,b,c,d){var f,g,j,k,m,n,e=[],h=700,i=200;switch(d){case 1:j="#",k="id";break;case 2:j=".",k="class";break;case 3:j="",k="";break;default:return e}h+=this.imgData.w,i+=this.imgData.h;for(var o=0;o<b.length;o++)if(item=b[o],item=this.trimPrices(item),item&&""!=item){var p=item.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"").replace(k," ");if(p.trim().length>0&&(f=a.querySelectorAll(p.replace(/ /g,j)),f.length<=c))for(var q=0;q<f.length;q++)"object"==typeof f[q]&&(g=f[q],g.po=this.nodePos(g),g.po&&(m=g.po.x-this.imgData.x,n=g.po.y-this.imgData.y,0>m&&(m*=-1),0>n&&(n*=-1),h>m&&i>n?(g.dis=parseInt(m+n),g.fsize=parseInt(this.zxcSVInt(g,"font-Size")),g.fdeco=this.zxcSVInt(g,"text-Decoration"),-1==g.fdeco.indexOf("line-through")&&(g.fsize>this.priceFont&&(this.priceFont=g.fsize),this.closestPrice>g.dis&&(this.closestPrice=g.dis),e.push(g))):this.elmFound=1))}return e},a.trimPrices=function(a){return a.replace(/^\s+|\s+$/g,"")},a.zxcSVInt=function(a,b){return a.currentStyle?a.currentStyle[b.replace(/-/g,"")]:document.defaultView.getComputedStyle(a,null).getPropertyValue(b.toLowerCase())},a.extractPrice=function(a){var b=a.match(this.priceRegex);return b&&b[0]?b[0]:(b=this.splitPrice(a),b?b.round:"")},a.careArr=function(a){var b=this.work(a);if(b&&b[0]){var c=this.extractPrice(b[0].st);return 1==b.length?c:2==b.length?this.choice([b[0].st,b[1].st],2):3==b.length?this.choice([b[0].st,b[1].st,b[2].st],3):0}return 0},a.work=function(a){var e,f,b=[],c=[],d=[];for(e=0;e<a.length;e++)b[e]=this.getDl(a[e]),("strike"==b[e].tag||"s"==b[e].tag)&&(b[e].inv=1);for(e=0;e<b.length;e++){for(f=e+1;f<b.length;f++)b[e].tag==b[f].tag&&(b[e].cl&&b[e].cl==b[f].cl&&b[e].price!=b[f].price||b[e].stl&&b[e].stl==b[f].stl)&&(f=++e,b[e].inv=1);b[e].inv||c.push(b[e])}for(e=0;e<c.length;e++){for(f=e+1;f<c.length;f++)c[e].price==c[f].price&&(f=++e);d.push(c[e])}return d},a.getDl=function(a){a=a.toLowerCase();var b={tag:"",price:""};if(a){a=a.replace("< ","<"),b.st=a;var c=a.substring(0,a.indexOf(">")+1);b.tag=c.substring(a.indexOf("<")+1,a.indexOf(" "));var d=a.match(this.priceRegex);if(d&&d[0]&&(b.price=d[0]),a.match(/(\([0-9]+%\))|from/gi))return b.inv=1,b;var e=c.indexOf("class");e>-1&&(b.cl=c.substring(e+5,c.length-1).match(/[\"\'][A-Za-z0-9\s-_]+[\"\']/i),b.cl&&(b.cl=b.cl[0].replace(/[\"\']/g,""))),e=c.indexOf("style"),e>-1&&(b.stl=c.substring(e+5,c.length-1).match(/[\"\'][^\"\']+[\"\']/),b.stl&&(b.stl=b.stl[0].replace(/[\"\']/g,""))),c.indexOf("id")>-1&&(b.id=1)}return b},a.choice=function(a,b){b=2==b||3==b?b:2;var c;if(a&&a.length>b-1){for(var d=0;b>d;d++)a[d]=this.splitPrice(a[d]);return a.sort(function(a,b){return a.fullPrice<b.fullPrice?-1:a.fullPrice>b.fullPrice?1:0}),c=3==b&&a[1].fullPrice==a[2].fullPrice?0:2==b&&a[1].fullPrice/a[0].fullPrice>4?1:b-2,a[c].round}return 0},a.getPriceFromObj=function(a){var b=this.extractPrice(a.innerHTML),c=this.splitPrice(b);return c.round},a.nodePos=function(a){var c=b.utils.getElementPosWithOffsets(a);return{l:c.left,t:c.top,w:c.width,h:c.height,x:c.left,y:c.top}},a.splitPrice=function(a){"string"!=typeof a&&(a=""+a),a=a.replace(/[\n\t ]/gi,""),a=a.replace(/(<([^>]+)>)/gi,""),a=a.replace(/<.+/g,"");var b,c,d,e,f=/([\$\xa3\u00A3\u20AC\u0440\u0192\u00A5\u20B1]|usd|eur|ils|r|rs|rp|\u0440\u0443\u0431){1,2}\.?/gi;a||(b=0,c=0,h="");var l,m,g=a.match(f),h=g?g[0]:"",i=a.replace(f,""),j=i.indexOf("."),k=i.indexOf(",");return-1==j&&-1==k?(b=this.stn(i),c=0):(l=Math.max(j,k),m=i[l]||(j>k?".":","),i=i.replace(/ /g,""),i.length-l<=3?(d=i.split(m),b=this.stn(d[0]),c=this.stn(d[1])):(b=this.stn(i),c=0)),e=parseFloat(b+"."+c),0==b&&0==c?0:{round:b,cents:c,sign:h,fullPrice:e}},a.stn=function(a){if(!a)return 0;var b=/[0-9]/gi,c=a.match(b);return c=c?c.join(""):0,c=c.length?parseInt(c):0}},a.ImageUtils=new function(){var a=this;a.getImgText=function(c,d){var e="";if(c=c||a.drawnOn){for(var h,f=d||5,g=c.parentNode,i=f;i>0&&!(h="a"==g.tagName.toLowerCase()?g:g.querySelector("a"));i--)g=g.parentNode;h&&(e+=h.title?h.title:"")}if(e=e.trim(),0==e.length){var j=h?h.href:"";if(j&&-1==j.indexOf("javascript")){var k="(http(s)?)?(://)?("+document.domain+")?((www.)("+document.domain+"))?",l=new RegExp(k,"i");if(j=j.replace(l,""),j&&j.length>0)for(var m=document.querySelectorAll("a[href='"+j+"']"),n=0;n<m.length;n++){var o=m[n].title;e+=o?" "+o:b.utils.getAllTextFromElementsTree(m[n])}}}return e=e.trim(),0==e.length&&(e=b.utils.getAllTextFromElementsTree(document.querySelector("h1"))),e+=c.alt,e=e.trim()},a.checkImages=function(c,d){for(var f,e=document.images,g=0;g<e.length;g++)if(e[g].clientHeight>=c.height&&a.isImageValid(e[g])){var h=b.PriceUtils.getPrice(e[g]);if(0!=h&&(f=e[g],c.height=f.clientHeight,d))break}return f},a.getLargestImage=function(){var b={height:400,width:400},c={height:120,width:120},d=a.checkImages(b,!0),e=a.checkImages(c,!0);return d?d:e},a.checkExistingImages=function(){return a.getLargestImage()?!0:!1},a.isScrolledIntoView=function(a){var b=a.getBoundingClientRect().top,c=a.getBoundingClientRect().bottom;return b>=0&&c<=window.innerHeight},a.isPositionedInDocument=function(b){var c=b.getBoundingClientRect().top,d=b.getBoundingClientRect().bottom;return c>=0&&d<=a.getDocHeight()},a.getDocHeight=function(){var a=document;return Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)},a.isImageDimensionsValid=function(a){var b=4200,c=.45,d=2,e=a.width,f=a.height;if(b>e*f)return!1;var g=e/f;return e*f>3*b&&(c>g||g>d)?!1:!0},a.isImageExtensionValid=function(a){var b="";try{b=a.src.toLowerCase()}catch(c){return!1}var d=b.indexOf("?");if(-1!=d&&(b=b.substring(0,d)),b.length<4)return!1;var e=b.substring(b.length-4,b.length);return".gif"==e||".png"==e?!1:!0},a.imageHasClickableAreas=function(a){return a.getAttribute("usemap")?!0:!1},a.isKnownUnsupportedImage=function(a){return!1},a.isImageValid=function(c){return a.isImageExtensionValid(c)&&a.isImageDimensionsValid(c)?a.imageHasClickableAreas(c)?!1:a.isKnownUnsupportedImage(c)?!1:b.utils.isVisible(c)?b.utils.isInvisibleDueToParentOverflow(c)?!1:a.isPositionedInDocument(c)?!0:!1:!1:!1}}};
